{% extends 'base.html' %}
{% block base %}

<section class="w-full bg-white dark:bg-[#0A2025] py-6 px-4 sm:px-8">
    <h1 class="text-center text-[#191919] dark:text-white text-2xl sm:text-[32px] font-semibold">
        My Shopping Cart
    </h1>
    {% if data %}
    <!-- Layout -->
    <div class="flex flex-col lg:flex-row mt-8 gap-6">

        <!-- Cart Table -->
        <div class="bg-white p-4 rounded-xl w-full lg:w-2/3 overflow-x-auto">
            <table class="w-full min-w-[600px]">
                <thead>
                    <tr
                        class="text-left border-b border-gray-300 text-[#7f7f7f] text-xs sm:text-sm font-medium uppercase">
                        <th class="px-2 py-3">Product</th>
                        <th class="px-2 py-3 text-center">Price</th>
                        <th class="px-2 py-3 text-center">Remove</th>
                    </tr>
                </thead>

                <tbody>
                    {% for i in data %}
                    <tr class="border-b text-sm sm:text-base">
                        <td class="px-2 py-4 flex items-center gap-3">
                            <img src="{{ i.course_object.picture.url }}"
                                class="h-16 sm:w-24 sm:h-24 object-cover rounded-md border bg-gray-100"
                                style="width: fit-content;" />
                            <span class="font-medium">
                                {{ i.course_object.title }}
                            </span>
                        </td>

                        <td class="px-2 py-4 text-center font-medium">
                            Rs. {{ i.course_object.price }}
                        </td>

                        <td class="px-2 py-4 text-center">
                            <a class="inline-flex items-center justify-center rounded-full hover:bg-red-50 transition"
                                href="{% url 'remove-cart' i.id %}" aria-label="Remove item from cart">
                                <svg class="mx-auto cursor-pointer text-gray-400 hover:text-red-500 transition"
                                    width="24" height="24" class="mx-auto cursor-pointer" viewBox="0 0 24 25"
                                    fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12.5" r="11" stroke="#CCCCCC" />
                                    <path d="M16 8.5L8 16.5" stroke="#666" stroke-width="1.5" stroke-linecap="round" />
                                    <path d="M16 16.5L8 8.5" stroke="#666" stroke-width="1.5" stroke-linecap="round" />
                                </svg>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>

                <tfoot>
                    <tr>
                        <td colspan="3" class="pt-4 flex flex-col sm:flex-row gap-3">
                            <button class="px-6 py-3 bg-[#f2f2f2] rounded-full text-sm font-semibold">
                                Return to shop
                            </button>
                            <!-- <button class="px-6 py-3 bg-[#f2f2f2] rounded-full text-sm font-semibold">
                                Update Cart
                            </button> -->
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Cart Total -->
        <div class="bg-white rounded-xl p-6 w-full lg:w-1/3 shadow-sm border">
            <h2 class="text-xl font-semibold mb-4">
                Cart Total
            </h2>

            <div class="flex justify-between py-2">
                <span>Total</span>
                <span class="font-semibold">Rs. {{cart_total}}</span>
            </div>

            <div class="flex justify-between py-2 border-t">
                <span>Shipping</span>
                <span class="font-semibold">Free</span>
            </div>

            <div class="flex justify-between py-2 border-t text-base">
                <span class="font-medium">Subtotal</span>
                <span class="font-semibold text-lg">Rs. {{cart_total}}</span>
            </div>

            </button>
            <a href="{% url 'order' %}"
                class="block w-full mt-6 py-4 bg-[#00b206] text-white rounded-full font-semibold text-center hover:bg-[#009a05] active:scale-[0.98] transition">
                Proceed to checkout
            </a>

        </div>

    </div>
    {% else %}
    <div class="w-full p-3 flex flex-col items-center">
        <img style="max-height: 690px;"
            src="https://assets.streamlinehq.com/image/private/w_800,h_800,ar_1/f_auto/v1/icons/shopping/empty-cart-lb2qls3hc10oh95ysepyyf.png/empty-cart-eudzxdt3f49bo2oyjh77m.png?_a=DATAiZAAZAA0"
            alt="No Cart Items Added">
    </div>
     <!-- <div class="text-center py-20 text-gray-500">
        <i class="fa-solid fa-cart-shopping text-4xl mb-4"></i>
        <p class="text-lg font-medium">Your cart is empty</p>
        <p class="text-sm">Start exploring courses to add items</p>
    </div> -->
    {% endif %}
</section>

{% endblock base %}